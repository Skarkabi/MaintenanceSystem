<div>
    <form action="/users/edit/{{user.id}}" method="POST" id="profileForm" enctype="multipart/form-data">
    <div class="form-group col">
        <label for="pPicture">Select File</label>
         <div class="custom-file">
            <input type="file"  onchange="loadFile(event)" class="custom-file-input" id="upload" name="upload">
            <label for="upload" class="custom-file-label">No File Choosen</label>
            <button type="submit" id="submit" name="submit" class="btn btn-primary justfiy-content-end"><i class="far fa-save"></i>Confirm</button>
            <img id="output" width="200" />
            <canvas id="canvas" width=300 height=300></canvas>
        </div>
    </div>
    </form>
    
</div>

<script>
var loadFile = function(event) {
	var image = document.getElementById('output');
    image.onload=start;
	image.src = URL.createObjectURL(event.target.files[0]);
    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var cw=canvas.width;
    var ch=canvas.height;
    function start(){
        var cw,ch;
        cw=canvas.width=image.width;
        ch=canvas.height=image.height;
        ctx.drawImage(image,0,0);
        ctx.globalCompositeOperation='destination-in';
        ctx.beginPath();
        ctx.arc(cw/2,ch/2,ch/2,0,Math.PI*2);
        ctx.closePath();
        ctx.fill();
}
};
</script>